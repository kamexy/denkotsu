# 006: QAテスト - 画像ネタバレの検出と修正

**日付**: 2026-02-16

## やり取りの内容

**ユーザー**: スクリーンショットで防水コンセント(WP)の問題を示し、画像に「防水コンセント」のラベルが表示されていて答えがバレていることを指摘。
「こういうの他にないですか？テスト設計の専門家にテスト設計をしてもらって、テスト実行の専門家にテストしてもらってください。」

## テスト実施

### テスト設計（専門エージェント）
53テストケースを設計。画像付き全35問 × SVG内の各要素(`<text>`, `<title>`, `<desc>`)を検証。

### テスト結果
| 判定 | 件数 |
|---|---|
| FAIL（テキスト一致によるネタバレ） | 26件 |
| FAIL（過度なヒントによるネタバレ） | 10件 |
| WARN（改善推奨） | 4件 |
| PASS | 10件 |

### ネタバレのパターン
1. **`<title>`/`<desc>` に正解が含まれる** - ほぼ全SVGが該当
2. **`<text>` ラベルに正解が視覚表示** - 最も深刻（WPの例）
3. **特徴説明テキストが正解そのもの** - 対応表、説明文

## 修正内容

### SVG修正（22ファイル）

**symbols/（10ファイル）**
- 器具名ラベル(`<text>`)を削除
- `<title>` を「スイッチの図記号」「コンセントの図記号」等に汎用化
- `<desc>` を「JIS C 0303に基づく〜」等に汎用化
- 図記号の描画（●、H、L、ET、=、WP等）は残存

**circuits/（1ファイル）**
- `single-phase-3wire.svg`: 電圧値「100V」「200V」→「?V」に変更

**wiring/（2ファイル）**
- `vvf-cable.svg`: 色名テキスト「黒」「白」「赤」削除、「3芯（黒・白・赤）」→「3芯(3C)」
- `pf-cd-pipe.svg`: 特徴テキスト・色名テキスト・チェック/バツマーク全削除

**tools/（9ファイル）**
- 工具名・器具名ラベル削除
- 説明テキスト・対応表テキスト削除
- `<title>`/`<desc>` を汎用化
- 工具の外観描画（形状、色、刻印マーク等）は残存

## 変更ファイル
- `public/images/symbols/*.svg` × 10
- `public/images/circuits/single-phase-3wire.svg`
- `public/images/wiring/vvf-cable.svg`
- `public/images/wiring/pf-cd-pipe.svg`
- `public/images/tools/*.svg` × 9
